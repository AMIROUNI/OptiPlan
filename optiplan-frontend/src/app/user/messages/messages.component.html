<div class="messages-container d-flex">
    <div class="users-list-container col-4">
      <div class="search-bar mb-3">
        <input type="text" class="form-control search-input" placeholder="Search users..." (input)="filterUsers($event)" [@searchAnimation]>
      </div>
      <div class="users-list" *ngIf="filteredUsers.length > 0; else noUsers">
        <div *ngFor="let user of filteredUsers; let i = index" (click)="showChatBox(user)" class="user-item d-flex align-items-center mb-2" [@userItemAnimation]="{value: 'in', params: {delay: i * 50 + 'ms'}}">
          <img [src]="user.avatarUrl || 'assets/default-avatar.png'" alt="Profile Avatar of {{ user.username }}" class="chat-avatar me-3">
          <div class="user-info flex-grow-1">
            <span class="username">{{ user.username }}</span>
          </div>
        </div>
      </div>
      <ng-template #noUsers>
        <div class="empty-state text-center p-4" [@fadeIn]>
          <i class="bi bi-people-fill display-4 text-muted"></i>
          <p>No users found. Start a conversation!</p>
        </div>
      </ng-template>
    </div>
  
    <div class="chat-container col-8" *ngIf="showChat" [@fadeInOut]>
      <div class="chat-header d-flex justify-content-between align-items-center p-3">
        <div class="chat-user-info d-flex align-items-center">
          <img [src]="selectedUser?.avatarUrl || 'assets/default-avatar.png'" alt="Profile Avatar of {{ selectedUser?.username }}" class="chat-avatar me-3">
          <div>
            <h3 class="mb-0">Chat with {{ selectedUser?.fullName || selectedUser?.username || 'User' }}</h3>
            <span class="status-badge online mt-1 d-block">Online</span>
          </div>
        </div>
        <button class="btn btn-icon close-btn" (click)="closeChat()" aria-label="Close chat">
          <i class="bi bi-x-lg"></i>
        </button>
      </div>
      <app-chat-box [selectedUserUsername]="selectedUserUsername" [selectedUserId]="selectedUserId" class="d-block"></app-chat-box>
    </div>
  </div>